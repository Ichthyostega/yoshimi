Author: Alessio Treglia <alessio@debian.org>
Origin: Debian
Description: Drop GCC options which are not supported on all architectures.
Bug: http://bugs.debian.org/584492
Forwarded: yes
---
 src/CMakeLists.txt |    4 ++++
 1 file changed, 4 insertions(+)

--- yoshimi.orig/src/CMakeLists.txt
+++ yoshimi/src/CMakeLists.txt
@@ -81,6 +81,9 @@ set (BuildOptionsBasic
 set (BuildOptionsDebug
     "-O0 -g3 -ggdb -Wall -Wpointer-arith" CACHE STRING "Debug build flags")
 
+set (BuildOptionsDebian
+    "-O3 -ffast-math -fomit-frame-pointer" CACHE STRING "Debian build flags")
+
 find_package (PkgConfig REQUIRED)
 if (PKG_CONFIG_FOUND)
     message(STATUS "Found pkg-config ${PKG_CONFIG_EXECUTABLE}")
@@ -194,6 +197,7 @@ else (BuildForDebug)
             set (CMAKE_CXX_FLAGS_RELEASE ${BuildOptionsBasic})
         endif (BuildForCore2_X86_64)
     endif (BuildForAMD_X86_64)
+    set (CMAKE_CXX_FLAGS_RELEASE ${BuildOptionsDebian})
     message (STATUS "Building for ${CMAKE_BUILD_TYPE}, flags: ${CMAKE_CXX_FLAGS_RELEASE}")
 endif (BuildForDebug)
 
